<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Redirecting...</title>

    <!-- SEO мета-теги для редиректа -->
    <meta name="robots" content="noindex, follow" />
    <link rel="canonical" href="/ru" />
    <meta name="description" content="Redirecting to the main page" />

    <!-- Для разных языков -->
    <link rel="alternate" hreflang="ru" href="/ru" />
    <link rel="alternate" hreflang="en" href="/en" />
    <link rel="alternate" hreflang="x-default" href="/ru" />

    <style>
      :root {
        /* Dark theme values from Layout.astro */
        --bg-color: #111111;
        --text-color: #ffffff;
        --primary-color: #e2c08d;
        --secondary-color: #c17b6f;
        --card-bg: #1a1a1a;
        --border-color: #2a2a2a;
        --text-primary: #e2e2e2;
        --text-secondary: #9ca38f;
        --text-tertiary: #666666;
        --accent-color: #e2c08d;

        /* RGB versions */
        --bg-color-rgb: 17, 17, 17;
        --text-color-rgb: 255, 255, 255;
        --primary-color-rgb: 226, 192, 141;
        --secondary-color-rgb: 193, 123, 111;
        --accent-color-rgb: 226, 192, 141;
      }

      body {
        margin: 0;
        background-color: var(--bg-color);
        height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        font-family: "Fira Code", Consolas, Monaco, "Andale Mono", "Ubuntu Mono",
          monospace;
        gap: 1rem;
      }

      .logo {
        display: flex;
        align-items: end;
        position: relative;
      }

      .logo-text {
        margin-left: -4px;
        position: relative;
        font-size: 1.4em;
        font-weight: 500;
        letter-spacing: 0.02em;
        color: var(--primary-color);
      }

      p {
        color: var(--text-primary);
        font-size: 1.2rem;
      }

      /* Анимации для логотипа */
      .diagonal-line {
        stroke-dasharray: 3 6;
        stroke-dashoffset: 0;
        animation: flowLineIdle 8s linear infinite;
        filter: drop-shadow(0 0 0.5px var(--primary-color));
      }

      @keyframes flowLineIdle {
        from {
          stroke-dashoffset: 0;
          filter: drop-shadow(0 0 0.5px var(--primary-color));
        }
        to {
          stroke-dashoffset: 18;
          filter: drop-shadow(0 0 1px var(--primary-color));
        }
      }

      .knowledge-node {
        animation: pulseNodeIdle 8s ease-in-out infinite;
      }

      .knowledge-node.end {
        animation-delay: 4s;
      }

      @keyframes pulseNodeIdle {
        0%,
        100% {
          transform: scale(0.9);
          filter: drop-shadow(0 0 1px var(--primary-color));
          opacity: 0.8;
        }
        50% {
          transform: scale(1.1);
          filter: drop-shadow(0 0 2px var(--primary-color));
          opacity: 0.9;
        }
      }

      .loading-text {
        color: var(--text-primary);
        font-size: 1.2rem;
        display: flex;
        align-items: center;
      }

      .dots {
        min-width: 3rem;
        margin-right: -3rem;
      }

      .dots::after {
        content: "";
        animation: dots 1.5s steps(4, end) infinite;
      }

      @keyframes dots {
        0%,
        20% {
          content: "";
        }
        40% {
          content: ".";
        }
        60% {
          content: "..";
        }
        80%,
        100% {
          content: "...";
        }
      }
    </style>
  </head>
  <body>
    <div class="logo">
      <svg
        width="48"
        height="48"
        viewBox="0 0 48 48"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          class="glow-bg"
          d="M16 8h14a10 10 0 0 1 10 10v12a10 10 0 0 1-10 10H16V8z"
          stroke="var(--primary-color)"
          stroke-width="0.5"
          stroke-opacity="0.3"
          fill="none"></path>
        <path
          d="M16 8h14a10 10 0 0 1 10 10v12a10 10 0 0 1-10 10H16V8z"
          stroke="var(--text-color)"
          fill="none"
          stroke-width="2.5"></path>
        <path
          d="M16 8v32"
          stroke="var(--secondary-color)"
          stroke-width="5"
          stroke-linecap="round"></path>
        <path
          class="diagonal-line"
          d="M24 16L32 32"
          stroke="var(--primary-color)"
          stroke-width="2"
          stroke-linecap="round"
          stroke-dasharray="3 6"></path>
        <circle
          class="knowledge-node start"
          cx="24"
          cy="16"
          r="2.5"
          fill="var(--primary-color)"></circle>
        <circle
          class="knowledge-node end"
          cx="32"
          cy="32"
          r="2.5"
          fill="var(--primary-color)"></circle>
      </svg>
      <span class="logo-text">ragorWW</span>
    </div>
    <p class="loading-text">Redirecting<span class="dots"></span></p>
    <script>
      // Определяем язык браузера
      const getBrowserLang = () => {
        const browserLang = navigator.language?.split("-")[0];
        const supportedLangs = ["ru", "en"];

        return supportedLangs.includes(browserLang) ? browserLang : "ru";
      };

      // Получаем сохраненный язык из localStorage или используем язык браузера
      const savedLang = localStorage.getItem("lang");
      const targetLang = savedLang || getBrowserLang();

      // Делаем редирект с учетом определенного языка
      window.location.href = `${window.location.pathname}${targetLang}`;
    </script>
  </body>
</html>
