var C=Object.defineProperty;var E=(a,t,o)=>t in a?C(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o;var h=(a,t,o)=>E(a,typeof t!="symbol"?t+"":t,o);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}})();(()=>{const a={MAX_FPS:60,MIN_FRAME_TIME:16.666666666666668,FONT_SIZE:30,FONT_FAMILY:"Fira Code, monospace",COLUMN_SPACING:.1,MAX_ACTIVE_COLUMNS_RATIO:5.55,SPAWN_RATE:.5,DESPAWN_RATE:.1,TRAIL_OPACITY:.15,MIN_SCROLL_OPACITY:.2,SYMBOL_UPDATE_RATE:.2},t={COLORS:{OPERATORS:"229, 192, 123",KEYWORDS:"198, 120, 221",FUNCTIONS:"97, 175, 239",STRINGS:"152, 195, 121",COMMENTS:"92, 99, 112",CONSTANTS:"224, 108, 117",BRACKETS:"209, 154, 102"},MIN_OPACITY:.4,MAX_OPACITY:.8,MIN_SPEED:.01,MAX_SPEED:.1},o={OPERATORS:[">=","<=","=>","->","<>","===","!==","||","&&","++","--"],KEYWORDS:["import","export","default","class","const","let","var","function","return","await","async"],FUNCTIONS:["try","catch","finally","break","continue","for","while","if","else","switch","case","do"],STRINGS:["...","?.","::"],COMMENTS:["<!--","-->","/**","*/","//","/*","*/"],CONSTANTS:["=>==","#!/"],BRACKETS:["[]","{}","()","<>","</>"]},i={PIXEL_SIZE:8,MIN_OPACITY:.02,MAX_OPACITY:.15,FADE_SPEED:.001,MAX_PIXELS:300,MOUSE_INFLUENCE_RADIUS:150,MOUSE_REPEL_STRENGTH:1,RETURN_SPEED:.05},n={light:{background:"rgba(255, 255, 255, 1)",pixelColor:"0, 0, 0",minOpacity:.05,maxOpacity:.25},dark:{background:"rgba(17, 17, 17, 1)",pixelColor:"255, 255, 255",minOpacity:.02,maxOpacity:.15}};class r{constructor(e,s=1e3){this.canvas=document.getElementById(e),this.ctx=this.canvas.getContext("2d"),this.startDelay=s,this.mousePosition={x:-1e3,y:-1e3},this.currentTheme=document.documentElement.getAttribute("data-theme")||"dark",this.setupCanvas(),this.ctx.fillStyle=n[this.currentTheme].background,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.isInitialized=!1,this.pixels=[],this.setupBackground(),this.bindEvents(),this.themeObserver=new MutationObserver(m=>{m.forEach(u=>{u.attributeName==="data-theme"&&(this.currentTheme=document.documentElement.getAttribute("data-theme")||"dark")})}),this.themeObserver.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]})}initialize(){this.isInitialized||(this.setupMeasureCanvas(),this.initializeArrays(),this.bindEvents(),this.lastTime=0,this.isInitialized=!0)}setupCanvas(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight}setupMeasureCanvas(){this.measureCanvas=document.createElement("canvas"),this.measureCtx=this.measureCanvas.getContext("2d"),this.measureCtx.font=`${a.FONT_SIZE}px ${a.FONT_FAMILY}`;const e=Object.values(o).flat();this.maxCharWidth=Math.max(...e.map(s=>this.measureCtx.measureText(s).width)),this.columnWidth=this.maxCharWidth+a.FONT_SIZE*a.COLUMN_SPACING}initializeArrays(){this.columns=Math.floor(this.canvas.width/this.columnWidth),this.drops=Array(this.columns).fill(1),this.activeColumns=new Set,this.opacities=Array(this.columns).fill(t.MAX_OPACITY),this.speeds=Array(this.columns).fill(1),this.currentSymbols=new Map,this.symbolUpdateCounters=new Map}bindEvents(){window.addEventListener("resize",()=>this.handleResize()),window.addEventListener("scroll",()=>this.handleScroll()),document.addEventListener("mousemove",e=>{const s=this.canvas.getBoundingClientRect();this.mousePosition={x:e.clientX-s.left,y:e.clientY-s.top+window.scrollY}}),document.addEventListener("mouseleave",()=>{this.mousePosition={x:-1e3,y:-1e3}})}handleResize(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.setupBackground();const e=Math.floor(this.canvas.width/this.columnWidth);this.drops.length=e,this.opacities.length=e,this.speeds.length=e,this.drops.fill(1),this.opacities.fill(t.MAX_OPACITY),this.speeds.fill(1),this.activeColumns.clear(),this.currentSymbols.clear(),this.symbolUpdateCounters.clear()}handleScroll(){const e=window.scrollY/(document.documentElement.scrollHeight-window.innerHeight);this.canvas.style.opacity=Math.max(a.MIN_SCROLL_OPACITY,1-e)}draw(e){requestAnimationFrame(m=>this.draw(m)),!(e-this.lastTime<a.MIN_FRAME_TIME)&&(this.lastTime=e,this.ctx.fillStyle=n[this.currentTheme].background,this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.updatePixels(),this.spawnNewColumns(),this.updateActiveColumns())}isColumnAvailable(e){for(const m of this.activeColumns)if(Math.abs(m-e)<3)return!1;return!0}spawnNewColumns(){if(this.activeColumns.size<this.columns*a.MAX_ACTIVE_COLUMNS_RATIO&&Math.random()>a.SPAWN_RATE){let e=10,s;do s=Math.floor(Math.random()*this.columns),e--;while((this.activeColumns.has(s)||!this.isColumnAvailable(s))&&e>0);e>0&&!this.activeColumns.has(s)&&this.isColumnAvailable(s)&&(this.activeColumns.add(s),this.drops[s]=1,this.speeds[s]=t.MIN_SPEED+Math.random()*(t.MAX_SPEED-t.MIN_SPEED),this.opacities[s]=t.MIN_OPACITY+Math.random()*(t.MAX_OPACITY-t.MIN_OPACITY))}}updateActiveColumns(){for(const e of this.activeColumns){if(!this.currentSymbols.has(e)||!this.symbolUpdateCounters.has(e)||Math.random()<a.SYMBOL_UPDATE_RATE){const l=Object.keys(o),p=l[Math.floor(Math.random()*l.length)],y=o[p],f=y[Math.floor(Math.random()*y.length)];this.currentSymbols.set(e,{text:f,category:p}),this.symbolUpdateCounters.set(e,0)}const{text:s,category:m}=this.currentSymbols.get(e),u=e*this.columnWidth+(this.columnWidth-this.measureCtx.measureText(s).width)/2;this.ctx.fillStyle=`rgba(${t.COLORS[m]}, ${this.opacities[e]})`,this.ctx.font=`${a.FONT_SIZE}px ${a.FONT_FAMILY}`,this.ctx.fillText(s,u,this.drops[e]*a.FONT_SIZE),this.symbolUpdateCounters.set(e,(this.symbolUpdateCounters.get(e)||0)+1),this.drops[e]*a.FONT_SIZE>this.canvas.height&&(Math.random()>a.DESPAWN_RATE?(this.activeColumns.delete(e),this.drops[e]=1,this.speeds[e]=1,this.opacities[e]=t.MAX_OPACITY,this.currentSymbols.delete(e),this.symbolUpdateCounters.delete(e)):this.drops[e]=0),this.drops[e]+=this.speeds[e]}}setupBackground(){const e=n[this.currentTheme];this.pixels=Array(i.MAX_PIXELS).fill(null).map(()=>({x:Math.random()*this.canvas.width,y:Math.random()*this.canvas.height,originalX:Math.random()*this.canvas.width,originalY:Math.random()*this.canvas.height,size:i.PIXEL_SIZE+Math.random()*i.PIXEL_SIZE*2,opacity:e.minOpacity+Math.random()*(e.maxOpacity-e.minOpacity),fadeDirection:Math.random()>.5?1:-1}))}updatePixels(){const e=n[this.currentTheme];this.pixels.forEach(s=>{if(s.opacity+=i.FADE_SPEED*s.fadeDirection,(s.opacity<=e.minOpacity||s.opacity>=e.maxOpacity)&&(s.fadeDirection*=-1),this.mousePosition){const m=s.x-this.mousePosition.x,u=s.y-this.mousePosition.y,l=Math.sqrt(m*m+u*u);if(l<i.MOUSE_INFLUENCE_RADIUS){const p=(i.MOUSE_INFLUENCE_RADIUS-l)/i.MOUSE_INFLUENCE_RADIUS;s.x+=m/l*p*i.MOUSE_REPEL_STRENGTH,s.y+=u/l*p*i.MOUSE_REPEL_STRENGTH}}s.x+=(s.originalX-s.x)*i.RETURN_SPEED,s.y+=(s.originalY-s.y)*i.RETURN_SPEED,this.ctx.fillStyle=`rgba(${n[this.currentTheme].pixelColor}, ${s.opacity})`,this.ctx.fillRect(s.x,s.y,s.size,s.size)})}start(){setTimeout(()=>{this.initialize(),requestAnimationFrame(e=>this.draw(e))},this.startDelay)}destroy(){this.themeObserver.disconnect()}}const c=(d,e=1e3)=>{const s=new r(d,e);return s.start(),s};window.initMatrixAnimation=c})();class g{constructor(){h(this,"commandDelay",50);h(this,"commandPause",1e3);h(this,"currentDirectory","");h(this,"currentBranch","");h(this,"currentInput","");h(this,"commandHistory",[]);h(this,"historyIndex",-1);h(this,"isAnimating",!1);h(this,"hints",["где ты работаешь?","какие проекты делал?","расскажи про опыт работы","как с тобой связаться?","какие технологии используешь?","где тебя найти в соцсетях?","help - список всех команд"]);h(this,"hintDelay",1500);h(this,"typeDelay",60);h(this,"eraseDelay",30);h(this,"pauseDelay",1e3);h(this,"betweenHintsDelay",300);h(this,"hintIndex",0);h(this,"hintTimeout",null);h(this,"isShowingHint",!1);h(this,"preventScroll",()=>{this.isAnimating&&(this.terminalContent.scrollTop=this.savedScrollTop)});this.container=document.querySelector(".terminal__history"),this.terminalContent=document.querySelector(".terminal__content"),this.loadCommands(),this.initialize(),this.startHintCycle(),this.hasAISupport="userAgentData"in navigator&&"speechRecognition"in window,this.HF_API_TOKEN="hf_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",this.MODEL_URL="https://api-inference.huggingface.co/models/facebook/blenderbot-400M-distill",this.isInitializing=!0}loadCommands(){const t={};document.querySelectorAll(".terminal__command").forEach(o=>{const i=o.dataset.command;t[i]={description:o.dataset.description||"",directory:o.dataset.directory||"",branch:o.dataset.branch||"",command:o.dataset.command||i,execute:()=>o.querySelector("template").innerHTML.trim()}}),this.commands=t}handlePrompt({command:t="",showCursor:o=!1,action:i="create",isHint:n=!1}={}){const r=o&&(document.activeElement===this.terminalContent||this.isInitializing),c=`
            <span class="terminal__prompt">
                ${this.currentDirectory?`<span class="terminal__prompt-path">${this.currentDirectory}</span>`:""}
                ${this.currentBranch?`<span class="terminal__prompt-branch">(${this.currentBranch})</span>`:""}
                <span class="terminal__prompt-symbol">$</span> 
                <span class="terminal__prompt-input ${n?"hint":""}">${t}${r?'<span class="terminal__prompt-cursor">█</span>':""}</span>
            </span>`;switch(i){case"create":const d=document.createElement("p");return d.innerHTML=c,d;case"update":const e=this.container.lastElementChild;return e.innerHTML=c,e;case"append":const s=document.createElement("p");return s.innerHTML=c,this.container.appendChild(s),this.terminalContent.scrollTop=this.terminalContent.scrollHeight,s}}async executeCommand(){const t=this.currentInput.trim().toLowerCase();if(t){this.isAnimating=!0,this.commandHistory.unshift(t),this.historyIndex=-1;const o=this.container.lastElementChild;if(o.innerHTML=this.handlePrompt({command:this.currentInput,action:"update"}).innerHTML,t==="clear")this.container.innerHTML="";else{let i;if(this.commands[t]?i=this.commands[t].execute():i=await this.tryAIResponse(t),i){const n=document.createElement("div");n.classList.add("terminal__output"),n.innerHTML=i,this.container.appendChild(n),await this.sleep(10)}}this.isAnimating=!1}this.currentInput="",this.handlePrompt({showCursor:!0,action:"append"}),await this.sleep(10),this.terminalContent.scrollTop=this.terminalContent.scrollHeight,this.startHintCycle()}async tryAIResponse(t){try{const i=document.getElementById("loading-template").content.cloneNode(!0).firstElementChild;this.container.appendChild(i),this.scrollToBottom(),await this.sleep(2e3);const n=await fetch(this.MODEL_URL,{method:"POST",headers:{Authorization:`Bearer ${this.HF_API_TOKEN}`,"Content-Type":"application/json"},body:JSON.stringify({inputs:{text:`Context: You are a helpful assistant for Sergey Andreev's personal website. 
                               He is a CTO with experience in educational projects.
                               Current question: ${t}`,max_length:100}})});if(i.remove(),!n.ok)throw new Error("API Error");const r=await n.json();return`<div class="terminal__output terminal__output--ai">
                <div class="terminal__output-header">🤖 AI Response:</div>
                <div class="terminal__output-content">${r.generated_text||r[0].generated_text}</div>
            </div>`}catch(o){return console.error("AI Error:",o),`<div class="terminal__output terminal__output--ai">
                <div class="terminal__output-header">🤖 Local AI:</div>
                <div class="terminal__output-content">${new w().generateResponse(t)}</div>
            </div>`}}async simulateCommand(t){let o=this.handlePrompt({action:"append"});const i=this.commands[t.split(" ")[0]],n=(i==null?void 0:i.command)||t;let r="";for(const c of n)await this.sleep(this.commandDelay),r+=c,o.innerHTML=this.handlePrompt({command:r,action:"create"}).innerHTML,this.scrollToBottom();if(await this.sleep(500),i){const c=i.execute(),d=document.createElement("div");if(d.classList.add("terminal__output"),t==="projects"){d.innerHTML='<ul class="terminal__projects"></ul>',this.container.appendChild(d);const e=d.querySelector(".terminal__projects"),s=c.match(/<li class="terminal__project">[\s\S]*?<\/li>/g);for(const m of s){const u=document.createElement("div");u.innerHTML=m;const l=u.firstChild;l.style.opacity="0",l.style.transform="translateY(-10px)",l.style.maxHeight="0",l.style.overflow="hidden",l.style.transition="all 0.3s ease",e.appendChild(l),await this.sleep(100);const p=l.scrollHeight;l.style.maxHeight=p+"px",l.style.opacity="1",l.style.transform="translateY(0)",await this.sleep(300),this.scrollToBottom()}}else d.innerHTML=c,this.container.appendChild(d);this.scrollToBottom()}i!=null&&i.directory&&(this.currentDirectory=i.directory),i!=null&&i.branch&&(this.currentBranch=i.branch)}async initialize(){this.disableScroll(),this.isAnimating=!0,this.isInitializing=!0,await this.showWelcomeMessage();const t=["about","skills","projects"];for(const o of t)await this.sleep(this.commandPause),await this.simulateCommand(o);await this.sleep(this.commandPause),this.isAnimating=!1,this.isInitializing=!1,this.enableScroll(),this.setupEventListeners(),this.handlePrompt({showCursor:document.activeElement===this.terminalContent,action:"append"}),setTimeout(()=>{this.currentInput||this.startHintCycle()},1e3)}disableScroll(){this.terminalContent.style.overflowY="hidden",this.savedScrollTop=this.terminalContent.scrollTop,this.terminalContent.addEventListener("scroll",this.preventScroll)}enableScroll(){this.terminalContent.style.overflowY="auto",this.terminalContent.removeEventListener("scroll",this.preventScroll)}scrollToBottom(){(this.isInitializing||this.isAnimating)&&(this.savedScrollTop=this.terminalContent.scrollHeight-this.terminalContent.clientHeight,this.terminalContent.scrollTop=this.savedScrollTop)}async showWelcomeMessage(){await this.simulateCommand("welcome")}sleep(t){return new Promise(o=>setTimeout(o,t))}setupEventListeners(){this.terminalContent.addEventListener("click",()=>{this.terminalContent.focus()}),this.terminalContent.setAttribute("tabindex","0"),this.terminalContent.addEventListener("keydown",t=>{t.code==="Space"&&t.preventDefault(),this.handleKeyPress(t)}),this.terminalContent.addEventListener("focus",()=>{this.isShowingHint&&(this.isShowingHint=!1,clearTimeout(this.hintTimeout),this.handlePrompt({command:"",showCursor:!0,action:"update"}))}),this.terminalContent.addEventListener("blur",()=>{!this.currentInput&&!this.isAnimating&&this.startHintCycle()}),document.removeEventListener("keydown",this.handleKeyPress)}handleKeyPress(t){this.isShowingHint&&(this.isShowingHint=!1,clearTimeout(this.hintTimeout),this.currentInput="",this.handlePrompt({command:"",showCursor:!0,action:"update"})),t.key==="Enter"?(this.executeCommand(),this.startHintCycle()):t.key==="Backspace"?(this.currentInput=this.currentInput.slice(0,-1),this.handlePrompt({command:this.currentInput,showCursor:!0,action:"update"})):t.key==="ArrowUp"?this.navigateHistory(-1):t.key==="ArrowDown"?this.navigateHistory(1):t.key.length===1&&(this.currentInput+=t.key,this.handlePrompt({command:this.currentInput,showCursor:!0,action:"update"}))}navigateHistory(t){this.commandHistory.length!==0&&(this.historyIndex=Math.max(-1,Math.min(this.commandHistory.length-1,this.historyIndex+t)),this.historyIndex===-1?this.currentInput="":this.currentInput=this.commandHistory[this.historyIndex],this.handlePrompt({command:this.currentInput,showCursor:!0,action:"update"}))}startHintCycle(){!this.currentInput&&!this.isAnimating&&document.activeElement!==this.terminalContent&&(this.hintTimeout=setTimeout(()=>this.showNextHint(),this.hintDelay))}async showNextHint(){if(this.currentInput||this.isAnimating||document.activeElement===this.terminalContent)return;this.isShowingHint=!0;const t=this.hints[this.hintIndex];let o="";for(const i of t){if(this.currentInput||!this.isShowingHint||document.activeElement===this.terminalContent)break;o+=i,this.handlePrompt({command:o,showCursor:!0,action:"update",isHint:!0}),await this.sleep(this.typeDelay)}for(!this.currentInput&&this.isShowingHint&&document.activeElement!==this.terminalContent&&await this.sleep(this.pauseDelay);o.length>0&&this.isShowingHint&&!this.currentInput&&document.activeElement!==this.terminalContent;)o=o.slice(0,-1),this.handlePrompt({command:o,showCursor:!0,action:"update"}),await this.sleep(this.eraseDelay);!this.currentInput&&document.activeElement!==this.terminalContent&&(this.hintIndex=(this.hintIndex+1)%this.hints.length,await this.sleep(this.betweenHintsDelay),this.startHintCycle()),this.isShowingHint=!1}}class w{constructor(){this.keywords={"опыт|работа|карьера":["Более 10 лет опыта в разработке. Сейчас работаю CTO в Ultimate Education.","Руковожу IT-стратегией образовательного холдинга из 7 компаний.","Специализируюсь на масштабировании образовательных проектов."],"проект|достижени":["Разработал LMS систему для 100k+ пользователей.","Создал комплексную аналитическую платформу для образовательного холдинга.","Оптимизировал производительность DevOps-системы в 10 раз."],"технолог|стек|язык":["Основной стек: React, TypeScript, Python, Kubernetes.","Опыт работы с Java, Kotlin, Node.js.","Активно использую современные облачные технологии."],"образовани|обучени":["Постоянно развиваюсь в сфре технологий.","Особый интерес к AI и масштабированию систем.","Делюсь опытом через менторство и технические статьи."],"контакт|связ|найти":["Email: dragorww@gmail.com","Telegram: @dragorww","GitHub: github.com/dragorww"]},this.defaultResponses=["Извините, не совсем понял вопрос. Попробуйте спросить о моем опыте работы, проектах или технологиях.","Может быть, вас интересует мой опыт работы в образовательных проектах?","Я могу рассказать о технологиях, которые использую, или о своих проектах."]}generateResponse(t){const o=t.toLowerCase();for(const[i,n]of Object.entries(this.keywords))if(new RegExp(i,"i").test(o))return n[Math.floor(Math.random()*n.length)];return this.defaultResponses[Math.floor(Math.random()*this.defaultResponses.length)]}}window.initTerminalAnimation=()=>{new g};(()=>{const a=`
        color: #E2C08D;
        font-family: monospace;
        font-size: 12px;
        line-height: 1;
    `,t=`
    ██████╗ ██████╗  █████╗  ██████╗  ██████╗ ██████╗ ██╗    ██╗██╗    ██╗
    ██╔══██╗██╔══██╗██╔══██╗██╔════╝ ██╔═══██╗██╔══██╗██║    ██║██║    ██║
    ██║  ██║██████╔╝███████║██║  ███╗██║   ██║██████╔╝██║ █╗ ██║██║ █╗ ██║
    ██║  ██║██╔══██╗██╔══██║██║   ██║██║   ██║██╔══██╗██║███╗██║██║███╗██║
    ██████╔╝██║  ██║██║  ██║╚██████╔╝╚██████╔╝██║  ██║╚███╔███╔╝╚███╔███╔╝
    ╚═════╝ ╚═╝  ╚═╝╚═╝  ╚═╝ ╚═════╝  ╚═════╝ ╚═╝  ╚═╝ ╚══╝╚══╝  ╚══╝╚══╝ 
    `,o=`
    👋 Привет, разработчик! 
    
    🚀 Раз уж ты заглянул в консоль, то наверняка тебе интересно что тут происходит.
    💼 Я всегда открыт к общению и новым проектам.
    
    📫 Связаться со мной:
    → Telegram: @dragorww
    → Twitter: @dragorww
    → Email: dragorww@gmail.com
    → GitHub: github.com/dragorww
    
    🔍 P.S. Попробуй поискать другие пасхалки на сайте!
    `;console.log("%c"+t,a),console.log("%c"+o,a)})();(()=>{function a(i){const n=document.querySelector('link[rel="icon"]'),r=n.cloneNode();r.href=`/assets/favicon-${i}.svg?v=${Date.now()}`,n.remove(),document.head.appendChild(r)}function t(){const n=(document.documentElement.getAttribute("data-theme")||"dark")==="light"?"dark":"light";document.documentElement.setAttribute("data-theme",n),localStorage.setItem("theme",n),a(n)}function o(){const i=localStorage.getItem("theme")||"light";document.documentElement.setAttribute("data-theme",i),a(i)}document.addEventListener("DOMContentLoaded",o),window.toggleTheme=t})();document.addEventListener("DOMContentLoaded",()=>{initMatrixAnimation("matrix",1e3),initTerminalAnimation()});
