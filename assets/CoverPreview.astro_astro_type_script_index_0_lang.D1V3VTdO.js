import{h as l}from"./vendor.B4CzG4On.js";const r=document.getElementById("sourceContainer"),c=document.getElementById("previewImage"),s=document.getElementById("downloadBtn"),d=document.getElementById("previewLoader");let o=null;const m=(e,n)=>{let t;return(...i)=>{t&&clearTimeout(t),t=setTimeout(()=>{e(...i)},n)}},a=async()=>{if(!(!r||!c))try{d?.classList.add("loading"),o=(await l(r.querySelector(".cover-preview"),{width:1200,height:630,scale:2,useCORS:!0,allowTaint:!0,backgroundColor:getComputedStyle(document.documentElement).getPropertyValue("--bg-color").trim()})).toDataURL("image/png",1),c.src=o}catch(e){console.error("Ошибка при создании превью:",e)}finally{d?.classList.remove("loading")}},u=m(a,500);document.addEventListener("preview-update",e=>{const n=document.getElementById("coverTitle"),t=document.getElementById("coverDescription");n&&(n.textContent=e.detail.title||"Заголовок обложки"),t&&(t.textContent=e.detail.description||"Описание обложки"),u()});window.addEventListener("load",a);s?.addEventListener("click",()=>{if(!o)return;const e=document.createElement("a");e.download="cover.png",e.href=o,e.click()});
